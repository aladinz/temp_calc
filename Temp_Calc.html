<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Temperature Converter</title>
    <style>
        :root {
            --bg-gradient-1: #667eea;
            --bg-gradient-2: #764ba2;
            --bg-gradient-3: #f093fb;
            --container-bg: rgba(255, 255, 255, 0.95);
            --text-primary: #2c3e50;
            --text-secondary: #666;
            --input-bg: white;
            --input-border: #e0e0e0;
            --border-color: #e0e0e0;
            --card-bg: #f8f9fa;
        }

        body.dark-mode {
            --bg-gradient-1: #1a1a2e;
            --bg-gradient-2: #16213e;
            --bg-gradient-3: #0f3460;
            --container-bg: rgba(30, 30, 46, 0.95);
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --input-bg: #2a2a3e;
            --input-border: #404052;
            --border-color: #404052;
            --card-bg: #2a2a3e;
        }

        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 50%, var(--bg-gradient-3) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 15px;
            animation: gradientShift 10s ease infinite;
            background-size: 200% 200%;
            transition: background 0.5s ease;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .container {
            background: var(--container-bg);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px 25px;
            width: 100%;
            max-width: 550px;
            animation: fadeIn 0.5s ease-out;
            position: relative;
            transition: background 0.3s ease;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .dark-mode-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--input-bg);
            border: 2px solid var(--input-border);
            border-radius: 50px;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        .dark-mode-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 20px;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        label {
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            font-size: 1rem;
            transition: color 0.3s ease;
        }
        .input-wrapper {
            position: relative;
        }
        input {
            padding: 15px 20px;
            border: 2px solid var(--input-border);
            border-radius: 12px;
            font-size: 18px;
            transition: all 0.3s;
            width: 100%;
            background: var(--input-bg);
            color: var(--text-primary);
            min-height: 48px;
            -webkit-appearance: none;
        }
        input:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }
        .unit-options {
            display: flex;
            gap: 12px;
            margin-top: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .unit-option {
            padding: 12px 20px;
            border-radius: 20px;
            cursor: pointer;
            background: #f0f4ff;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            border: 2px solid #e0e7ff;
            flex: 1;
            text-align: center;
            min-width: 80px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .unit-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .unit-option.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            flex: 1;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            min-height: 48px;
            touch-action: manipulation;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        button:active {
            transform: translateY(-1px);
        }
        button.clear-btn {
            background: linear-gradient(135deg, #fc6c85 0%, #e07c91 100%);
            box-shadow: 0 4px 15px rgba(252, 108, 133, 0.3);
        }
        button.clear-btn:hover {
            box-shadow: 0 6px 20px rgba(252, 108, 133, 0.4);
        }
        .results-container {
            margin-top: 25px;
        }
        .result-card {
            margin-bottom: 12px;
            padding: 18px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            opacity: 0;
            transform: translateX(-20px);
            animation: slideIn 0.5s ease-out forwards;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .result-card.celsius {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            animation-delay: 0.1s;
        }
        .result-card.fahrenheit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
            animation-delay: 0.2s;
        }
        .result-card.kelvin {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
            animation-delay: 0.3s;
        }
        .result-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .result-value {
            font-size: 1.3rem;
            font-weight: 700;
        }
        .scale-indicator {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .scale-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            text-align: center;
        }
        .scale-bar {
            height: 30px;
            background: linear-gradient(to right, #3498db, #2ecc71, #f39c12, #e74c3c);
            border-radius: 15px;
            position: relative;
            overflow: visible;
        }
        .scale-marker {
            position: absolute;
            top: -10px;
            width: 4px;
            height: 50px;
            background: white;
            border: 2px solid #2c3e50;
            border-radius: 2px;
            transition: left 0.5s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            z-index: 10;
        }
        .landmark {
            position: absolute;
            top: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .landmark:hover {
            transform: translateX(-50%) scale(1.1);
        }
        .landmark-marker {
            width: 3px;
            height: 40px;
            background: white;
            border: 2px solid var(--text-primary);
            border-radius: 2px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            margin-bottom: 5px;
        }
        .landmark-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-primary);
            background: var(--container-bg);
            padding: 3px 6px;
            border-radius: 5px;
            white-space: nowrap;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }
        .landmark-icon {
            font-size: 1rem;
            margin-bottom: 2px;
        }
        .formula-box {
            margin-top: 15px;
            padding: 12px;
            background: var(--card-bg);
            border-radius: 10px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        .temp-reference {
            margin-top: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-radius: 12px;
            color: white;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(-10px);
            animation: slideIn 0.5s ease-out forwards;
            animation-delay: 0.4s;
        }
        .temp-reference .emoji {
            font-size: 2rem;
            display: block;
            margin-bottom: 8px;
        }
        .temp-reference .message {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        .temp-reference .detail {
            font-size: 0.85rem;
            opacity: 0.9;
        }
        .fun-fact-box {
            margin-top: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            opacity: 0;
            transform: translateY(-10px);
            animation: slideIn 0.5s ease-out forwards;
            animation-delay: 0.5s;
        }
        .fun-fact-box .fact-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            display: block;
        }
        .fun-fact-box .fact-title {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .fun-fact-box .fact-text {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .history-panel {
            margin-top: 20px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            opacity: 0;
            transform: translateY(-10px);
            animation: slideIn 0.5s ease-out forwards;
            animation-delay: 0.6s;
        }
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
        .history-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .history-clear-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .history-clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .history-clear-btn:active {
            transform: translateY(0);
        }
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 5px;
        }
        .history-list::-webkit-scrollbar {
            width: 6px;
        }
        .history-list::-webkit-scrollbar-track {
            background: var(--input-bg);
            border-radius: 3px;
        }
        .history-list::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }
        .history-list::-webkit-scrollbar-thumb:hover {
            background: #667eea;
        }
        .history-item {
            padding: 12px;
            margin-bottom: 8px;
            background: var(--input-bg);
            border-radius: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-left-color: #764ba2;
        }
        .history-conversion {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        .history-timestamp {
            font-size: 0.75rem;
            color: var(--text-secondary);
            opacity: 0.7;
        }
        .history-empty {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        .history-empty-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            opacity: 0.5;
        }
        .error-message {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 8px;
            text-align: center;
            font-weight: 600;
        }
        .hidden {
            display: none;
        }
        footer {
            text-align: center;
            margin-top: 25px;
            padding: 15px 0 5px 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            border-top: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        footer .heart {
            color: #ff6b6b;
            animation: heartbeat 1.5s ease-in-out infinite;
            display: inline-block;
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
        }

        /* Mobile Responsive Styles */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 25px 20px;
                border-radius: 20px;
            }
            h1 {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }
            input {
                font-size: 16px;
                padding: 14px 16px;
            }
            .unit-options {
                gap: 8px;
            }
            .unit-option {
                font-size: 13px;
                padding: 10px 15px;
                min-width: auto;
            }
            .button-group {
                gap: 8px;
            }
            button {
                font-size: 15px;
                padding: 14px;
            }
            .result-card {
                padding: 15px;
                font-size: 1rem;
            }
            .result-value {
                font-size: 1.2rem;
            }
            .scale-indicator {
                padding: 12px;
            }
            .landmark-label {
                font-size: 0.6rem;
                padding: 2px 4px;
            }
            .landmark-icon {
                font-size: 0.85rem;
            }
            .landmark-marker {
                height: 35px;
            }
            .formula-box {
                font-size: 0.8rem;
                padding: 10px;
            }
            footer {
                font-size: 0.85rem;
                padding: 12px 0 3px 0;
            }
        }

        @media (max-width: 400px) {
            .container {
                padding: 20px 15px;
            }
            h1 {
                font-size: 1.6rem;
            }
            .unit-option {
                font-size: 12px;
                padding: 10px 12px;
            }
            .result-card {
                padding: 12px;
            }
            .result-label {
                font-size: 0.8rem;
            }
            .result-value {
                font-size: 1.1rem;
            }
        }

        /* Landscape Mobile */
        @media (max-height: 600px) and (orientation: landscape) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
                margin: 10px 0;
            }
            h1 {
                font-size: 1.6rem;
                margin-bottom: 12px;
            }
            .input-group {
                gap: 10px;
                margin-bottom: 15px;
            }
            .result-card {
                padding: 12px;
                margin-bottom: 8px;
            }
            .scale-indicator {
                margin-top: 15px;
                padding: 10px;
            }
            footer {
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="dark-mode-toggle" id="darkModeToggle" title="Toggle Dark Mode">üåô</button>
        <h1>üå°Ô∏è Temperature Converter</h1>
        <div class="input-group">
            <label for="temperature">Enter Temperature:</label>
            <div class="input-wrapper">
                <input type="number" id="temperature" placeholder="e.g., 25" step="0.01" autofocus>
            </div>
            <label>Select Input Unit:</label>
            <div class="unit-options">
                <div class="unit-option active" data-unit="celsius">¬∞C Celsius</div>
                <div class="unit-option" data-unit="fahrenheit">¬∞F Fahrenheit</div>
            </div>
        </div>
        <div class="button-group">
            <button id="calculate">üîÑ Convert</button>
            <button class="clear-btn" id="clear">üóëÔ∏è Clear</button>
        </div>
        <div id="error" class="error-message hidden"></div>
        
        <div class="results-container hidden" id="resultsContainer">
            <div class="result-card celsius" id="celsiusResult">
                <div>
                    <div class="result-label">Celsius</div>
                    <div class="result-value" id="celsiusValue">--</div>
                </div>
                <div style="font-size: 2rem;">¬∞C</div>
            </div>
            <div class="result-card fahrenheit" id="fahrenheitResult">
                <div>
                    <div class="result-label">Fahrenheit</div>
                    <div class="result-value" id="fahrenheitValue">--</div>
                </div>
                <div style="font-size: 2rem;">¬∞F</div>
            </div>
        </div>

        <div class="scale-indicator hidden" id="scaleIndicator">
            <div class="scale-title" id="scaleTitle">Temperature Scale with Key Landmarks (¬∞C)</div>
            <div class="scale-bar">
                <div class="scale-marker" id="scaleMarker"></div>
                <!-- Temperature Landmarks -->
                <div class="landmark" id="landmark1" style="left: 50%;" title="Water Freezing Point">
                    <div class="landmark-icon">üßä</div>
                    <div class="landmark-marker"></div>
                    <div class="landmark-label" id="landmarkLabel1">0¬∞C</div>
                </div>
                <div class="landmark" id="landmark2" style="left: 75%;" title="Room Temperature">
                    <div class="landmark-icon">üè†</div>
                    <div class="landmark-marker"></div>
                    <div class="landmark-label" id="landmarkLabel2">20¬∞C</div>
                </div>
                <div class="landmark" id="landmark3" style="left: 96.25%;" title="Human Body Temperature">
                    <div class="landmark-icon">üå°Ô∏è</div>
                    <div class="landmark-marker"></div>
                    <div class="landmark-label" id="landmarkLabel3">37¬∞C</div>
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: #666; margin-top: 65px;">
                <span id="scaleMin">-40¬∞C</span>
                <span id="scaleMax">100¬∞C Boil üíß</span>
            </div>
        </div>

        <div class="formula-box hidden" id="formulaBox">
            <strong>Conversion Formulas:</strong><br>
            <span id="formulaText"></span>
        </div>

        <div class="temp-reference hidden" id="tempReference">
            <span class="emoji" id="refEmoji">üå°Ô∏è</span>
            <div class="message" id="refMessage">Temperature Reference</div>
            <div class="detail" id="refDetail">Context will appear here</div>
        </div>


        <div class="fun-fact-box hidden" id="funFactBox">
            <span class="fact-icon">üí°</span>
            <div class="fact-title">Did You Know?</div>
            <div class="fact-text" id="funFactText">Temperature facts will appear here</div>
        </div>

        <div class="history-panel hidden" id="historyPanel">
            <div class="history-header">
                <div class="history-title">
                    <span>üìú</span> Conversion History
                </div>
                <button class="history-clear-btn" id="clearHistory">üóëÔ∏è Clear All</button>
            </div>
            <div class="history-list" id="historyList">
                <div class="history-empty">
                    <div class="history-empty-icon">üìã</div>
                    <div>No conversions yet. Start converting temperatures!</div>
                </div>
            </div>
        </div>

        <footer>
            Temperature Converter made with <span class="heart">‚ù§Ô∏è</span> by Aladdin
        </footer>
    </div>

    <script>
        const tempInput = document.getElementById('temperature');
        const errorDiv = document.getElementById('error');
        const resultsContainer = document.getElementById('resultsContainer');
        const scaleIndicator = document.getElementById('scaleIndicator');
        const formulaBox = document.getElementById('formulaBox');
        const formulaText = document.getElementById('formulaText');
        const tempReference = document.getElementById('tempReference');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const funFactBox = document.getElementById('funFactBox');
        const funFactText = document.getElementById('funFactText');
        const historyPanel = document.getElementById('historyPanel');
        const historyList = document.getElementById('historyList');
        const clearHistoryBtn = document.getElementById('clearHistory');

        // Temperature history array
        let conversionHistory = [];

        // Load history from localStorage
        function loadHistory() {
            const saved = localStorage.getItem('conversionHistory');
            if (saved) {
                conversionHistory = JSON.parse(saved);
                displayHistory();
            }
        }

        // Save history to localStorage
        function saveHistory() {
            localStorage.setItem('conversionHistory', JSON.stringify(conversionHistory));
        }

        // Add conversion to history
        function addToHistory(celsius, fahrenheit, unit) {
            const timestamp = new Date();
            const entry = {
                celsius: celsius.toFixed(2),
                fahrenheit: fahrenheit.toFixed(2),
                inputUnit: unit,
                timestamp: timestamp.toISOString(),
                displayTime: formatTimestamp(timestamp)
            };
            
            // Add to beginning of array (most recent first)
            conversionHistory.unshift(entry);
            
            // Keep only last 20 conversions
            if (conversionHistory.length > 20) {
                conversionHistory = conversionHistory.slice(0, 20);
            }
            
            saveHistory();
            displayHistory();
        }

        // Format timestamp
        function formatTimestamp(date) {
            const now = new Date();
            const diff = Math.floor((now - date) / 1000); // seconds
            
            if (diff < 60) return 'Just now';
            if (diff < 3600) return `${Math.floor(diff / 60)} min ago`;
            if (diff < 86400) return `${Math.floor(diff / 3600)} hours ago`;
            if (diff < 604800) return `${Math.floor(diff / 86400)} days ago`;
            
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Display history
        function displayHistory() {
            if (conversionHistory.length === 0) {
                historyList.innerHTML = `
                    <div class="history-empty">
                        <div class="history-empty-icon">üìã</div>
                        <div>No conversions yet. Start converting temperatures!</div>
                    </div>
                `;
                return;
            }
            
            historyPanel.classList.remove('hidden');
            
            historyList.innerHTML = conversionHistory.map((entry, index) => {
                const arrow = entry.inputUnit === 'celsius' ? '‚Üí' : '‚Üê';
                const conversion = entry.inputUnit === 'celsius' 
                    ? `${entry.celsius}¬∞C ${arrow} ${entry.fahrenheit}¬∞F`
                    : `${entry.fahrenheit}¬∞F ${arrow} ${entry.celsius}¬∞C`;
                
                return `
                    <div class="history-item" data-index="${index}">
                        <div class="history-conversion">${conversion}</div>
                        <div class="history-timestamp">${entry.displayTime}</div>
                    </div>
                `;
            }).join('');
            
            // Add click handlers to reuse conversions
            document.querySelectorAll('.history-item').forEach(item => {
                item.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    const entry = conversionHistory[index];
                    
                    // Set input value
                    if (entry.inputUnit === 'celsius') {
                        tempInput.value = entry.celsius;
                        document.querySelector('[data-unit="celsius"]').click();
                    } else {
                        tempInput.value = entry.fahrenheit;
                        document.querySelector('[data-unit="fahrenheit"]').click();
                    }
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
        }

        // Clear history
        clearHistoryBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to clear all conversion history?')) {
                conversionHistory = [];
                saveHistory();
                displayHistory();
                historyPanel.classList.add('hidden');
            }
        });

        // Dark mode functionality
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            darkModeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
        }

        // Load dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            darkModeToggle.textContent = '‚òÄÔ∏è';
        }

        darkModeToggle.addEventListener('click', toggleDarkMode);

        // Load conversion history on page load
        loadHistory();

        // Update scale landmarks based on unit
        function updateScaleLandmarks(unit) {
            const scaleTitle = document.getElementById('scaleTitle');
            const scaleMin = document.getElementById('scaleMin');
            const scaleMax = document.getElementById('scaleMax');
            const landmark1 = document.getElementById('landmark1');
            const landmark2 = document.getElementById('landmark2');
            const landmark3 = document.getElementById('landmark3');
            const landmarkLabel1 = document.getElementById('landmarkLabel1');
            const landmarkLabel2 = document.getElementById('landmarkLabel2');
            const landmarkLabel3 = document.getElementById('landmarkLabel3');

            if (unit === 'celsius') {
                scaleTitle.textContent = 'Temperature Scale with Key Landmarks (¬∞C)';
                scaleMin.textContent = '-40¬∞C';
                scaleMax.textContent = '100¬∞C Boil üíß';
                
                // Landmarks: 0¬∞C (50%), 20¬∞C (75%), 37¬∞C (96.25%)
                landmark1.style.left = '50%';
                landmarkLabel1.textContent = '0¬∞C';
                
                landmark2.style.left = '75%';
                landmarkLabel2.textContent = '20¬∞C';
                
                landmark3.style.left = '96.25%';
                landmarkLabel3.textContent = '37¬∞C';
            } else {
                scaleTitle.textContent = 'Temperature Scale with Key Landmarks (¬∞F)';
                scaleMin.textContent = '-40¬∞F';
                scaleMax.textContent = '212¬∞F Boil üíß';
                
                // Convert landmarks to Fahrenheit positions
                // Scale range: -40¬∞F to 212¬∞F (252 degree span)
                // 32¬∞F (water freezing) = ((32 - (-40)) / 252) * 100 = 28.57%
                // 68¬∞F (room temp) = ((68 - (-40)) / 252) * 100 = 42.86%
                // 98.6¬∞F (body temp) = ((98.6 - (-40)) / 252) * 100 = 55%
                
                landmark1.style.left = '28.57%';
                landmarkLabel1.textContent = '32¬∞F';
                
                landmark2.style.left = '42.86%';
                landmarkLabel2.textContent = '68¬∞F';
                
                landmark3.style.left = '55%';
                landmarkLabel3.textContent = '98.6¬∞F';
            }
        }

        // Fun Facts Database
        const funFacts = [
            "The hottest temperature ever recorded on Earth was 134¬∞F (56.7¬∞C) in Death Valley, California in 1913!",
            "Absolute zero (-273.15¬∞C or -459.67¬∞F) is the coldest possible temperature where atoms stop moving!",
            "The surface of the Sun is about 5,778 Kelvin (5,505¬∞C or 9,941¬∞F)!",
            "Water can exist in all three states (solid, liquid, gas) at 0.01¬∞C under specific pressure conditions!",
            "The coldest temperature ever recorded on Earth was -128.6¬∞F (-89.2¬∞C) in Antarctica in 1983!",
            "Your body temperature drops by about 1-2¬∞F when you sleep!",
            "Hot water can freeze faster than cold water under certain conditions - this is called the Mpemba effect!",
            "Lightning can heat the air around it to 30,000 Kelvin (53,540¬∞F) - five times hotter than the Sun's surface!",
            "The coldest place in the known universe is the Boomerang Nebula at -272¬∞C, just 1 degree above absolute zero!",
            "Fahrenheit originally used 0¬∞ for the coldest temperature he could achieve with ice and salt!",
            "The average temperature of the human body is actually 98.6¬∞F (37¬∞C), not exactly 37¬∞C!",
            "Antarctica is the coldest continent with an average temperature of -49¬∞C (-56¬∞F)!",
            "The core of the Earth is as hot as the surface of the Sun - about 5,500¬∞C (9,932¬∞F)!",
            "Celsius was originally called 'Centigrade' meaning '100 steps' between freezing and boiling!",
            "The temperature at which Celsius and Fahrenheit are equal is -40¬∞!",
            "Supercooled water can remain liquid below 0¬∞C until disturbed, then freezes instantly!",
            "The highest fever ever recorded in a human was 115.7¬∞F (46.5¬∞C) - and the person survived!",
            "Space is not exactly 'cold' - it's actually a vacuum with no temperature, but heat dissipates quickly!"
        ];

        function getRandomFunFact() {
            return funFacts[Math.floor(Math.random() * funFacts.length)];
        }

        // Temperature reference data
        function getTemperatureReference(celsius, unit) {
            if (celsius <= -273.15) {
                return { emoji: 'ü•∂', message: 'Absolute Zero!', detail: 'The coldest temperature possible in the universe', gradient: 'linear-gradient(135deg, #4a00e0 0%, #8e2de2 100%)' };
            } else if (celsius < -40) {
                return { emoji: '‚ùÑÔ∏è', message: 'Extremely Cold!', detail: 'Colder than the coldest inhabited places on Earth', gradient: 'linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)' };
            } else if (celsius >= -40 && celsius < -20) {
                return { emoji: 'üßä', message: 'Freezer Temperature', detail: 'Commercial freezers operate around this range', gradient: 'linear-gradient(135deg, #3a7bd5 0%, #00d2ff 100%)' };
            } else if (celsius >= -20 && celsius < 0) {
                return { emoji: '‚õÑ', message: 'Below Freezing', detail: 'Cold enough to snow and freeze water', gradient: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)' };
            } else if (celsius === 0) {
                return { emoji: 'üßä', message: 'Water Freezing Point!', detail: 'The temperature at which water turns to ice', gradient: 'linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)' };
            } else if (celsius > 0 && celsius < 10) {
                return { emoji: 'üß•', message: 'Cold Weather', detail: 'Typical winter temperature, coat recommended', gradient: 'linear-gradient(135deg, #5ee7df 0%, #b490ca 100%)' };
            } else if (celsius >= 10 && celsius < 20) {
                return { emoji: 'üçÉ', message: 'Cool & Pleasant', detail: 'Perfect spring weather, light jacket weather', gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)' };
            } else if (celsius >= 20 && celsius < 25) {
                const detail = unit === 'fahrenheit' ? 'Ideal indoor comfort zone (68-73¬∞F)' : 'Ideal indoor comfort zone (20-22¬∞C)';
                return { emoji: 'üè†', message: 'Perfect Room Temperature!', detail: detail, gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)' };
            } else if (celsius >= 25 && celsius < 30) {
                return { emoji: '‚òÄÔ∏è', message: 'Warm & Comfortable', detail: 'Great beach weather, sunscreen recommended', gradient: 'linear-gradient(135deg, #ffd89b 0%, #19547b 100%)' };
            } else if (celsius >= 30 && celsius < 37) {
                return { emoji: 'üåû', message: 'Hot Summer Day', detail: 'Stay hydrated and find some shade!', gradient: 'linear-gradient(135deg, #f83600 0%, #f9d423 100%)' };
            } else if (celsius >= 37 && celsius < 38) {
                return { emoji: 'üå°Ô∏è', message: 'Human Body Temperature!', detail: 'Normal body temperature is around 37¬∞C (98.6¬∞F)', gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)' };
            } else if (celsius >= 38 && celsius < 50) {
                return { emoji: 'ü•µ', message: 'Very Hot!', detail: 'Dangerous heat - risk of heat exhaustion', gradient: 'linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%)' };
            } else if (celsius >= 50 && celsius < 100) {
                return { emoji: 'üî•', message: 'Extreme Heat!', detail: 'Hotter than the hottest deserts on Earth', gradient: 'linear-gradient(135deg, #e53935 0%, #e35d5b 100%)' };
            } else if (celsius === 100) {
                return { emoji: 'üíß', message: 'Water Boiling Point!', detail: 'The temperature at which water turns to steam', gradient: 'linear-gradient(135deg, #f12711 0%, #f5af19 100%)' };
            } else if (celsius > 100 && celsius < 200) {
                return { emoji: '‚ô®Ô∏è', message: 'Superheated Steam!', detail: 'Hot enough to cook food instantly', gradient: 'linear-gradient(135deg, #c31432 0%, #240b36 100%)' };
            } else {
                return { emoji: 'üåã', message: 'Volcanic Temperatures!', detail: 'Hotter than molten lava!', gradient: 'linear-gradient(135deg, #ff0000 0%, #8b0000 100%)' };
            }
        }

        // Conversion functions
        function celsiusToFahrenheit(c) {
            return (c * 9/5) + 32;
        }

        function fahrenheitToCelsius(f) {
            return (f - 32) * 5/9;
        }

        function convertTemperature() {
            const temp = parseFloat(tempInput.value);
            const unit = document.querySelector('.unit-option.active').getAttribute('data-unit');
            
            // Clear error
            errorDiv.classList.add('hidden');
            
            // Validate input
            if (isNaN(temp) || tempInput.value.trim() === '') {
                errorDiv.textContent = '‚ö†Ô∏è Please enter a valid temperature';
                errorDiv.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                scaleIndicator.classList.add('hidden');
                formulaBox.classList.add('hidden');
                return;
            }

            // Convert between units
            let celsius, fahrenheit;

            if (unit === 'celsius') {
                celsius = temp;
                fahrenheit = celsiusToFahrenheit(temp);
                formulaText.innerHTML = `Converting from Celsius to Fahrenheit:<br>¬∞F = (¬∞C √ó 9/5) + 32 = (${temp.toFixed(1)} √ó 9/5) + 32 = <strong>${fahrenheit.toFixed(2)}¬∞F</strong>`;
            } else if (unit === 'fahrenheit') {
                celsius = fahrenheitToCelsius(temp);
                fahrenheit = temp;
                formulaText.innerHTML = `Converting from Fahrenheit to Celsius:<br>¬∞C = (¬∞F - 32) √ó 5/9 = (${temp.toFixed(1)} - 32) √ó 5/9 = <strong>${celsius.toFixed(2)}¬∞C</strong>`;
            }

            // Validate absolute zero
            if (celsius < -273.15) {
                errorDiv.textContent = '‚ö†Ô∏è Temperature below absolute zero (-273.15¬∞C) is not possible';
                errorDiv.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                scaleIndicator.classList.add('hidden');
                formulaBox.classList.add('hidden');
                tempReference.classList.add('hidden');
                return;
            }

            // Update results
            document.getElementById('celsiusValue').textContent = celsius.toFixed(2);
            document.getElementById('fahrenheitValue').textContent = fahrenheit.toFixed(2);

            // Update temperature reference
            const reference = getTemperatureReference(celsius, unit);
            document.getElementById('refEmoji').textContent = reference.emoji;
            document.getElementById('refMessage').textContent = reference.message;
            document.getElementById('refDetail').textContent = reference.detail;
            tempReference.style.background = reference.gradient;
            tempReference.classList.remove('hidden');

            // Update scale landmarks based on unit
            updateScaleLandmarks(unit);

            // Update scale marker position based on unit
            let markerPosition;
            if (unit === 'celsius') {
                // Celsius scale: -40 to 100 (140 degree span)
                markerPosition = ((celsius + 40) / 140) * 100;
            } else {
                // Fahrenheit scale: -40 to 212 (252 degree span)
                markerPosition = ((fahrenheit + 40) / 252) * 100;
            }
            const clampedPosition = Math.max(0, Math.min(100, markerPosition));
            document.getElementById('scaleMarker').style.left = clampedPosition + '%';

            // Show results
            resultsContainer.classList.remove('hidden');
            scaleIndicator.classList.remove('hidden');
            formulaBox.classList.remove('hidden');

            // Show a random fun fact
            funFactText.textContent = getRandomFunFact();
            funFactBox.classList.remove('hidden');

            // Add to history
            addToHistory(celsius, fahrenheit, unit);

            // Re-trigger animations
            resultsContainer.querySelectorAll('.result-card').forEach((card, index) => {
                card.style.animation = 'none';
                setTimeout(() => {
                    card.style.animation = '';
                }, 10);
            });
        }

        // Event Listeners
        document.getElementById('calculate').addEventListener('click', convertTemperature);

        document.getElementById('clear').addEventListener('click', function() {
            tempInput.value = '';
            errorDiv.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            scaleIndicator.classList.add('hidden');
            formulaBox.classList.add('hidden');
            tempReference.classList.add('hidden');
            funFactBox.classList.add('hidden');
            tempInput.focus();
        });

        // Real-time conversion on input
        tempInput.addEventListener('input', function() {
            if (tempInput.value.trim() !== '') {
                convertTemperature();
            }
        });

        // Unit switching functionality
        document.querySelectorAll('.unit-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.unit-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                
                // Reconvert if there's a value
                if (tempInput.value.trim() !== '') {
                    convertTemperature();
                }
            });
        });

        // Keyboard support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                convertTemperature();
            } else if (e.key === 'Escape') {
                document.getElementById('clear').click();
            }
        });
    </script>
</body>
</html>
